<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MPX OS - Programmer's Manual</title>
    <link rel="stylesheet" type="text/css" href="manual.css">
</head>
<body>
<div class="header">
    <h1>MPX Operating System</h1>
    <h2>Programmer's Manual</h2>
</div>

<div class="container">
    <div class="sidebar">
        <h2>Table of Contents</h2>
        <ul>
            <li><a href="#introduction">Introduction</a></li>
            <li><a href="#command-handler">Command Handler</a></li>
            <li><a href="#serial-poller">Serial Poller</a></li>
            <li><a href="#help">Help</a></li>
            <li><a href="#version">Version</a></li>
            <li><a href="#time">Time</a></li>
            <li><a href="#pcbuser">PCB User</a></li>
        </ul>
    </div>

    <div class="main-content">
        <!-- Introduction -->
        <section id="introduction">
            <h2>Introduction</h2>
            <p>This manual provides detailed documentation of the MPX Operating System, aiming to aid developers in understanding, maintaining, and extending the system.</p>
        </section>

        <!-- Command Handler -->
        <section id="command-handler">
            <h2>Command Handler</h2>
            <h3>Functions</h3>
            <dl>
                <dt>void comhand(void)</dt>
                <dd>Main loop for the command-line interface. Initializes the user interface and waits for user input to process commands. Does not take any parameters.</dd>

                <dt>static void process_command(const char *command)</dt>
                <dd>Accepts a command from the user, given as a string, and invokes the appropriate function to handle that command. The function does not return any values.</dd>

                <dt>void rtrim(char *str)</dt>
                <dd>Removes trailing white spaces from the input string. Takes a pointer to a character array as its parameter and modifies the array in-place. Does not return any value.</dd>
            </dl>
            <h3>Data Types</h3>
            <p>No custom data types are used.</p>
        </section>

        <!-- Serial Poller -->
        <section id="serial-poller">
            <h2>Serial Poller</h2>
            <h3>Functions</h3>
            <dl>
                <dt>int serial_poll(device dev, char *buffer, size_t len)</dt>
                <dd>Reads from the serial device into a buffer of specified length. Returns the number of bytes read on success, and -1 on failure. Parameters include device ID, buffer to read into, and length of the buffer.</dd>
            </dl>
            <h3>Data Types</h3>
            <dl>
                <dt>typedef int device</dt>
                <dd>An integer type that represents the device ID, such as COM1.</dd>

                <dt>size_t</dt>
                <dd>Standard C library type that represents the size of objects in bytes.</dd>
            </dl>
        </section>
        
        <!-- Help -->
        <section id="help">
            <h2>Help</h2>
            <h3>Functions</h3>
            <dl>
                <dt>void help(void)</dt>
                <dd>Displays each of the functions that a user can call and provides a name, the arguments and a description for each function. Takes in no parameters and returns no parameters is just used to display a help message to the screen</dd>
            </dl>
            <h3>Data Types</h3>
            <p>No custom data types are used.</p>
        </section>
        
        <!-- Version -->
        <section id="version">
            <h2>Version</h2>
            <h3>Functions</h3>
            <dl>
                <dt>void version(void)</dt>
                <dd>Displays the current working version of the MPX compiler. The current version is expressed in the form of R#.? where # stands for the current module being worked on and ? stands for the numbered update to the development branch. For example version R3.2 would represent module 3 being currently worked on, and the second major commit to the Development branch.</dd>
            </dl>
            <h3>Data Types</h3>
            <p>No custom data types are used.</p>
        </section>
        
        <!-- Time -->
        <section id="time">
            <h2>Time</h2>
            <h3>Functions</h3>
            <dl>
                <dt>void get_time(void)</dt>
                <dd>Will get the current time on the operating system and display it to the user. Does not take any parameters or return any values.</dd>

                <dt>void getDate(void)</dt>
                <dd>Will get the current date on the operating system and display it to the user. Does not take any parameters or return any values.</dd>

                <dt>void setTime(void)</dt>
                <dd>Takes in three different user inputs, one to represent the hours, one to represent the minutes and one to represent the seconds. The user will recieve three different prompts for each of the three inputs. Afterwards the operating systems clock is updated to reflect the new time that was passed in by the user and that new time is displayed to the user. Does not take any parameters or return any values.</dd>
                
                <dt>void setDate(void)</dt>
                <dd>Takes in three different user inputs, one to represent the month, one to represent the day and one to represent the year. The user will recieve three different prompts for each of the three inputs. Afterwards the operating systems clock is updated to reflect the new date that was passed in by the user and that new date is displayed to the user. Does not take any parameters or return any values.</dd>
                
                <dt>void reverse(char str[], int length)</dt>
                <dd>Takes in two parameters, one for the string to be flipped and one that stores the length of the string. This is a helper method that serves the purpose of flipping a string around in reverse order based on the character. This method doesn't return any values.</dd>
                
                <dt>char* itoa(int num, char* str, int base)</dt>
                <dd>Takes in three parameters, one for the number to be converted, one for the string where the integer is saved to and one for the base of the number that is passed in (Ex. base 10 is standard). This method works by going through and converting an integer to to a string and then returning that integer as a string pointer back to wherever called this method.</dd>
            </dl>
            <h3>Data Types</h3>
            <p>No custom data types are used.</p>
        </section>
        
        <!-- PCB User -->
        <section id="pcbuser">
            <h2>PCB User</h2>
            <h3>Functions</h3>
            <dl>
                <dt>void create_pcb(void)</dt>
                <dd>Takes in no parameters when the method is called. The method works by running through three different while loops that break out once the provided user input is valid. The first loop first takes in a name for a PCB from the user and checks to see if the name is either too long (longer than 10 chars) or already in use, if so the loop will skip to the next iteration and reprompt, if not it will keep the saved user input and break out of the loop. Then in the second loop it takes in a class input from the user and checks to see if that value is either 0 or 1 (user or system class). If the input is proper it will break out of the loop and if not it will skip to the next iteration of the loop and reprompt. Finally in the priority loop the user is prompted for the priority associated with the PCB. The code checks that the priority is in the valid range of 0 to 9 and if so it will break out of the loop, if not it will repeat and ask again. After each of these loops run and get the needed information from the user the method calls the pcb_setup and pcb_insert commands to actually create the PCB and add it to the required queue.</dd>

                <dt>void delete_pcb(void)</dt>
                <dd>Takes in no parameters when the method is called. The method works by asking the user to input a name from there it checks to see whether or not that name is a PCB that is being stored by calling the pcb_find method. I then checks to see if the class of that PCB (if it exists) is a system process and if either of those things fail out (i.e. if name isn't a PCB or the class is a system process) it will return an error. Otherwise it will then call the pcb_remove function to remove the PCB.</dd>

                <dt>void block_pcb(void)</dt>
                <dd>Takes in no parameters, it works by asking for the PCB name from the user. It does a check to see if the PCB exists by running the pcb_find method, and if the PCB isn't found it will return an print an error. Otherwise we know it exists and the PCB is removed from it's current queue and the state is switched to blocked (1) and then it is readded to the appropriate queue.</dd>
                
                <dt>void unblock_pcb(void)</dt>
                <dd>Takes in no parameters, it works by asking for the PCB name from the user. It does a check to see if the PCB exists by running the pcb_find method, and if the PCB isn't found it will return an print an error. Otherwise we know it exists and the PCB is removed from it's current queue and the state is switched to unblocked/ready (0) and then it is readded to the appropriate queue.</dd>
                
                <dt>void suspend_pcb(char str[], int length)</dt>
                <dd>Takes in no parameters, it works by asking for the PCB name from the user. It does a check to see if the PCB exists by running the pcb_find method, and if the PCB isn't found it will return an print an error. It then checks if the PCB is a system process and if it is it will return and print an error. Otherwise we know it exists and the PCB is removed from it's current queue and the state is switched to suspended and then it is readded to the appropriate queue.</dd>

                <dt>void resume_pcb(void)</dt>
                <dd> Takes in no parameters, it works by asking for the PCB name they wish to resume. Checks if the name exists in the structure, if not found it will output an error message. If exists then it will remove it from the current queue, channge state to resume and inserts it into the resume queue. </dd>

                <dt>void set_priority(void)</dt>
                <dd> Takes in no parameters, prompts the user for the pcb name, checks for existence of pcb. If does not exist, outputs an error message. If it does find the pcb then it prompts the user for a priority level, converts the input from a string to an integer then updates the priority. </dd>

                <dt>void show_pcb(void)</dt>
                <dd> Takes in no parameters, promtps the user for the pcb name, checks for existence of the pcb. If it does not exist, an output message will be thrown. If if does exist then it is located with pcb_find. Created strings for name, class, state, priority, and suspension. Converts these characteristics into the string version via an itoa call for each. Outputs these consecutively via a sys_req call for each.  </dd>
                
            </dl>
            <h3>Data Types</h3>
            <p>No custom data types are used.</p>
        </section>
    </div>
</div>

<div class="footer">
    <p>For additional questions, please refer to the source code or contact the development team.</p>
</div>
</body>
</html>
